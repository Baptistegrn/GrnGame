# GrnGame

<div align="center">

**Un moteur de jeu 2D Python puissant, con√ßu pour le pixel art**

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![PyPI](https://img.shields.io/badge/pypi-v1.0.0-orange.svg)](https://pypi.org/project/GrnGame/)

[Fonctionnalit√©s](#-fonctionnalit√©s) ‚Ä¢ [Installation](#-installation) ‚Ä¢ [D√©marrage rapide](#-d√©marrage-rapide) ‚Ä¢ [Documentation](#-api-principale) ‚Ä¢ [Exemples](#-exemples)

</div>

---

## ‚ú® Fonctionnalit√©s

**GrnGame est une bibliotheque l√©gere,performante et simple pour cr√©er des jeux 2D en Python :**

* üñºÔ∏è **Rendu optimis√©** - Gestion de sprites avec batch rendering
* üîä **Audio multicanal** - 32 canaux audio simultan√©s
* ‚å®Ô∏è **Entr√©es compl√®tes** - Clavier, souris et manettes
* üéÆ **Support gamepad** - API intuitive pour les contr√¥leurs
* üßÆ **Outils math√©matiques** - Biblioth√®que de fonctions int√©gr√©e
* üöÄ **Haute performance** - Optimis√© pour le pixel art et les jeux r√©tro
* ü™ü **Multi-plateforme** - Compatible Windows et Linux
* üÜë‚Äã **police custom** - Police custom sans ttf
* ‚öôÔ∏è‚Äã **Compilation** - possibilite de compiler
* ‚ùå‚Äã **Erreur** - Systeme d'erreur dans un .log

---

## üé¨ Exemples

<div align="center">

**Jeu d'exemple simple**

<img src="https://raw.githubusercontent.com/Baptistegrn/GrnGame/main/GrnGame/creations/example/example.gif" width="600">

**D√©mo Space Attacks**

<img src="https://raw.githubusercontent.com/Baptistegrn/GrnGame/main/GrnGame/creations/spaceattacks/space.gif" width="600">

</div>

---

## üì¶ Installation

### Via PyPI

```bash
pip install GrnGame
```

### Import dans votre projet

```python
from GrnGame import GrnGame
```

> ‚ö†Ô∏è **Important** : L'import doit √™tre exactement `from GrnGame import GrnGame`. Toute autre forme peut emp√™cher la localisation des d√©pendances internes.

---

## üöÄ D√©marrage rapide

### Premier programme

```python
from GrnGame import GrnGame

def update():
    # Dessiner un sprite
    GrnGame.dessiner_image("./assets/player.png", 10, 10, 32, 32)
    
    # D√©tecter une action
    if GrnGame.touche_juste_presser("space"):
        GrnGame.jouer_son("./assets/jump.wav")

# Initialiser le jeu
GrnGame.init(
    largeur=160,              # R√©solution virtuelle (largeur)
    hauteur=90,               # R√©solution virtuelle (hauteur)
    fps=60,                   # Images par seconde
    coeff=4,                  # Facteur d'√©chelle de la fen√™tre
    chemin_image="./assets",  # Dossier des images
    chemin_son="./assets",    # Dossier des sons
    dessiner=True,            # Dessiner le fond
    bande_noir=True,          # Bandes noires si ratio diff√©rent
    r=0, g=0, b=0,           # Couleur de fond RGB
    update_func=update,       # Fonction appel√©e √† chaque frame
    nom_fenetre="Mon Jeu"     # Titre de la fen√™tre
)
```

---

## üìñ API Principale

### üéØ Propri√©t√©s globales

| Propri√©t√© | Type | Description |
|-----------|------|-------------|
| `GrnGame.largeur` | `int` | Largeur de la r√©solution virtuelle |
| `GrnGame.hauteur` | `int` | Hauteur de la r√©solution virtuelle |
| `GrnGame.dt` | `float` | Delta time (temps entre frames) |
| `GrnGame.fps` | `float` | FPS actuel du jeu |
| `GrnGame.time` | `float` | Temps √©coul√© depuis le d√©marrage |
| `GrnGame.run` | `bool` | √âtat d'ex√©cution du jeu |
| `GrnGame.decalage_x` | `int` | D√©calage horizontal en plein √©cran |
| `GrnGame.decalage_y` | `int` | D√©calage vertical en plein √©cran |

---

### üñ±Ô∏è Entr√©e souris

```python
# Position de la souris
x = GrnGame.mouse_x
y = GrnGame.mouse_y

# Bouton gauche
if GrnGame.mouse_presse:            # Maintenu
    pass
if GrnGame.mouse_juste_presse:      # Vient d'√™tre press√©
    pass

# Bouton droit
if GrnGame.mouse_droit_presse:      # Maintenu
    pass
if GrnGame.mouse_droit_juste_presse:  # Vient d'√™tre press√©
    pass
```

---

### ‚å®Ô∏è Entr√©e clavier
**LES ENTREES CLAVIER SONT LES TOUCHES PHYSIQUES DU CLAVIER ANGLAIS  :  W equivaut a Z pour un clavier francais**
```python
# D√©tecter une pression unique
if GrnGame.touche_juste_presser("space"):
    print("Espace press√© !")

# D√©tecter une touche maintenue
if GrnGame.touche_enfoncee("left"):
    position_x -= vitesse
```

<details>
<summary><b>üìã Liste compl√®te des touches support√©es</b></summary>

**Lettres** : `a` √† `z`

**Chiffres** : `0` √† `9`

**Navigation** :
- Fl√®ches : `up`, `down` (ou `dn`), `left` (ou `lt`), `right` (ou `rt`)
- Page : `home`, `end`, `pageup` (ou `pgup`), `pagedown` (ou `pgdn`)

**Syst√®me** :
- `space`, `enter` (ou `return`), `tab`, `backspace`
- `escape` (ou `esc`), `delete`, `insert`

**Modificateurs** :
- Shift : `shift`, `lshift`, `rshift`
- Ctrl : `ctrl` (ou `control`), `lctrl`, `rctrl`
- Alt : `alt`, `lalt`, `ralt`
- Caps : `caps`, `capslock`
- `numlock`, `scrolllock`

**Touches fonction** : `f1` √† `f12`

**Sp√©ciales** :
- `pause`, `break`, `print` (ou `prtscr`, `printscreen`)
- `sysreq`, `menu`, `application`

**GUI/Syst√®me** :
- Windows : `lwin`, `rwin`, `lgui`, `rgui`
- Super : `lsuper`, `rsuper`
- Mac : `lcmd`, `rcmd`

**Pav√© num√©rique** :
- Chiffres : `kp0` √† `kp9`
- Op√©rateurs : `kp+` (ou `kpplus`), `kp-` (ou `kpminus`), `kp*` (ou `kpmultiply`), `kp/` (ou `kpdivide`)
- Autres : `kp=` (ou `kpequals`), `kp.` (ou `kpperiod`), `kpenter` (ou `kpe`)

**M√©dia** :
- Volume : `mute` (ou `audiomute`), `volumeup` (ou `volup`, `audioup`), `volumedown` (ou `voldown`, `audiodown`)
- Contr√¥le : `play` (ou `audioplay`, `mediaplay`, `playpause`), `stop` (ou `audiostop`, `mediastop`)
- Navigation : `next` (ou `audionext`, `medianext`), `previous` (ou `prev`, `audioprev`, `mediaprev`)

**Navigateur** :
- `browserback`, `browserfwd`, `browserstop`
- `browserhome`, `browserrefresh`, `browsersearch`

**√ânergie** : `power`, `sleep`

**Caract√®res sp√©ciaux** : `-`, `=`, `[`, `]`, `;`, `'`, `,`, `.`, `/`, `` ` ``, `\`

</details>

---

### üéÆ Manettes (Gamepads)

```python
# Initialiser une manette
if GrnGame.init_mannette(0):  # 0 = premi√®re manette connect√©e
    print("Manette connect√©e !")

# D√©tecter les boutons
if GrnGame.touche_mannette_juste_presse("a"):
    print("Bouton A press√© !")

if GrnGame.touche_mannette_enfoncee("x"):
    print("Bouton X maintenu")

# Lire les joysticks et g√¢chettes
axes = GrnGame.renvoie_joysticks(dead_zone=0.15)
if axes:
    stick_g_x, stick_g_y, stick_d_x, stick_d_y, gachette_l, gachette_r = axes
    
    # D√©placement avec le stick gauche
    position_x += stick_g_x * vitesse
    position_y += stick_g_y * vitesse

# Fermer la manette (important avant de quitter)
GrnGame.fermer_controller()
```

<details>
<summary><b>üéÆ Boutons de manette support√©s</b></summary>

**Boutons faciaux** : `a`, `b`, `x`, `y`

**Syst√®me** : `start`, `back`, `select`, `guide`, `home`, `share`

**Bumpers** : `lb`, `rb`, `l1`, `r1`

**Sticks cliquables** : `l3`, `r3`

**D-Pad** : `up`, `down`, `left`, `right`

**Additionnels** : `paddle1`, `paddle2`, `paddle3`, `paddle4`, `touchpad`

**Valeurs des axes** :
- Retourne 6 valeurs flottantes entre -1.0 et 1.0
- `dead_zone` : seuil pour ignorer les petites d√©viations (d√©faut: 0.1)
- Ordre : stick gauche X/Y, stick droit X/Y, g√¢chette gauche, g√¢chette droite

</details>

---

### üñºÔ∏è Rendu graphique

#### Dessiner des images

```python
# Image unique
GrnGame.dessiner_image(
    lien="./assets/sprite.png",
    x=10, y=20,
    w=32, h=32,
    sens=0,        # 0=normal, 1=miroir horizontal
    rotation=0     # Rotation en degr√©s (0-360)
)

# Batch rendering (plus performant pour plusieurs sprites)
GrnGame.dessiner_image_batch(
    ids=["./assets/tile.png", "./assets/tile.png", "./assets/enemy.png"],
    xs=[0, 32, 64],
    ys=[0, 0, 16],
    ws=[32, 32, 48],
    hs=[32, 32, 48],
    sens=[0, 0, 1],        # Optionnel
    rotations=[0, 0, 90]   # Optionnel
)
```

#### Afficher du texte

```python
GrnGame.dessiner_mot(
    lien="./assets/font",    # Chemin vers la police
    mot="Score: 1000",
    x=10, y=10,
    coeff=1,      # √âchelle du texte
    ecart=1,      # Espacement entre caract√®res
    sens=0,       # 0=normal, 1=miroir
    rotation=0    # Rotation en degr√©s
)
```
> üí° **Astuce** : Les √©l√©ments sont rendus dans l'ordre d'appel. Le dernier √©l√©ment dessin√© appara√Æt au premier plan.
#### Console de debug

```python
GrnGame.ecrire_console("Message de debug")
```



---

### üîä Gestion audio

```python
# Jouer un son
GrnGame.jouer_son(
    lien="./assets/explosion.wav",
    boucle=0,    # 0=infini, 1+=nombre de r√©p√©titions
    canal=5      # 0-31 = canal sp√©cifique
)

# Contr√¥le des canaux
GrnGame.arreter_canal(5)
GrnGame.pause_canal(5)
GrnGame.reprendre_canal(5)

# Contr√¥le des sons individuels
GrnGame.arreter_son("./assets/music.wav")
GrnGame.pause_son("./assets/music.wav")
GrnGame.reprendre_son("./assets/music.wav")
```

**Caract√©ristiques** :
- 32 canaux audio simultan√©s (0-31)
- Format support√© : WAV
- `boucle=0` : lecture en boucle infinie
- `boucle=n` : r√©p√®te n fois puis s'arr√™te

---

### üßÆ Fonctions math√©matiques

```python
# Op√©rations de base
GrnGame.abs_val(-5)              # Valeur absolue ‚Üí 5
GrnGame.clamp(15, 0, 10)         # Limiter entre min/max ‚Üí 10
GrnGame.pow(2, 8)                # Puissance ‚Üí 256
GrnGame.sqrt(64)                 # Racine carr√©e ‚Üí 8.0
GrnGame.cbrt(27)                 # Racine cubique ‚Üí 3.0
GrnGame.random(10, 50)           # Nombre al√©atoire entre 10 et 50

# Trigonom√©trie
angle = GrnGame.atan2(dy, dx)    # Angle entre deux points
distance = GrnGame.hypot(dx, dy) # Distance euclidienne

# Arrondis
GrnGame.floor(3.7)    # ‚Üí 3.0
GrnGame.ceil(3.2)     # ‚Üí 4.0
GrnGame.round(3.5)    # ‚Üí 4.0
GrnGame.trunc(3.9)    # ‚Üí 3.0

# Logarithmes et exponentielles
GrnGame.exp(2)        # e^x
GrnGame.log(10)       # ln(x)
GrnGame.log10(100)    # log‚ÇÅ‚ÇÄ(x)
GrnGame.log2(8)       # log‚ÇÇ(x)
```

<details>
<summary><b>üìê Fonctions compl√®tes</b></summary>

**Trigonom√©trie** : `sin`, `cos`, `tan`, `asin`, `acos`, `atan`, `atan2`

**Hyperboliques** : `sinh`, `cosh`, `tanh`, `asinh`, `acosh`, `atanh`

**Exponentielles** : `exp`, `log`, `log10`, `log2`

**Arrondis** : `floor`, `ceil`, `round`, `trunc`

**Autres** : `fmod`, `hypot`, `abs_val`, `clamp`, `pow`, `sqrt`, `cbrt`, `random`

</details>

---

### üé® Gestion de la fen√™tre

```python
# Basculer en plein √©cran / fen√™tr√©
GrnGame.redimensionner_fenetre()

# Changer la couleur de fond
GrnGame.colorier(r, g, b)  # RGB (0-255)

# Arr√™ter le jeu proprement
GrnGame.stopper_jeu()
```

---

## üÖ∞Ô∏è Cr√©er une police personnalis√©e

GrnGame utilise des polices bitmap (images) plut√¥t que des fichiers TTF.

### Structure requise

```
assets/
‚îî‚îÄ‚îÄ font/
    ‚îú‚îÄ‚îÄ 32.png    # Espace (code ASCII 32)
    ‚îú‚îÄ‚îÄ 33.png    # !
    ‚îú‚îÄ‚îÄ 48.png    # 0
    ‚îú‚îÄ‚îÄ 49.png    # 1
    ‚îú‚îÄ‚îÄ 65.png    # A
    ‚îú‚îÄ‚îÄ 66.png    # B
    ‚îú‚îÄ‚îÄ 97.png    # a
    ‚îî‚îÄ‚îÄ ...
```

### R√®gles importantes

1. **Nom de fichier** = code ASCII du caract√®re
   - `65.png` = lettre "A"
   - `97.png` = lettre "a"
   - `48.png` = chiffre "0"

2. **Taille uniforme** : toutes les images doivent avoir les m√™mes dimensions (ex: 8√ó8, 16√ó16)

3. **Caract√®res support√©s** : ASCII standard (0-127)
   - `32.png` = espace
   - `48-57.png` = chiffres 0-9
   - `65-90.png` = majuscules A-Z
   - `97-122.png` = minuscules a-z

### Exemple d'utilisation

```python
GrnGame.dessiner_mot(
    lien="./assets/font",
    mot="Score: 1234",
    x=10, y=10,
    coeff=2,     # Taille √ó2
    ecart=1,     # 1 pixel entre lettres
    sens=0,
    rotation=0
)
```

### Cr√©er plusieurs styles

```
assets/
‚îú‚îÄ‚îÄ font_pixel/      # Police pixel art
‚îú‚îÄ‚îÄ font_outline/    # Police avec contour
‚îî‚îÄ‚îÄ font_neon/       # Police style n√©on
```

```python
# Changer de police dynamiquement
GrnGame.dessiner_mot("./assets/font_outline", "GAME OVER", 40, 40, coeff=3)
```

---

## üìö Structure de projet recommand√©e

```
mon_jeu/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ sprites/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enemy.png
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tiles.png
‚îÇ   ‚îú‚îÄ‚îÄ fonts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 32.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 65.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ title/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ sounds/
‚îÇ       ‚îú‚îÄ‚îÄ jump.wav
‚îÇ       ‚îú‚îÄ‚îÄ shoot.wav
‚îÇ       ‚îî‚îÄ‚îÄ music.wav
‚îî‚îÄ‚îÄ README.md
```

---

## üíª Exemple complet

```python
from GrnGame import GrnGame

# Variables globales
player_x = 64
player_y = 40
player_speed = 50.0  # pixels par seconde
score = 0
m = False

def update():
    global player_x, player_y, score,m
    if not m:
       m= GrnGame.init_mannette(0)

    # D√©placement fluide avec delta time
    deplacement = player_speed * GrnGame.dt
    
    if GrnGame.touche_enfoncee("left"):
        player_x -= deplacement
    if GrnGame.touche_enfoncee("right"):
        player_x += deplacement
    if GrnGame.touche_enfoncee("up"):
        player_y -= deplacement
    if GrnGame.touche_enfoncee("down"):
        player_y += deplacement
    
    # Limiter aux bords de l'√©cran
    player_x = GrnGame.clamp(player_x, 0, GrnGame.largeur - 16)
    player_y = GrnGame.clamp(player_y, 0, GrnGame.hauteur - 16)
    
    # Action avec espace
    if GrnGame.touche_juste_presser("space"):
        GrnGame.jouer_son("./assets/shoot.wav", boucle=1, canal=1)
        score += 10
    
    # Support manette
    axes = GrnGame.renvoie_joysticks(dead_zone=0.2)
    if axes:
        stick_x, stick_y = axes[0], axes[1]
        player_x += stick_x * deplacement
        player_y += stick_y * deplacement
        
        if GrnGame.touche_mannette_juste_presse("a"):
            GrnGame.jouer_son("./assets/shoot.wav", boucle=1, canal=1)
            score += 10
    
    # Rendu
    GrnGame.dessiner_image("./assets/player.png", player_x, player_y, 16, 16)
    GrnGame.dessiner_mot("./assets/font", f"Score: {score}", 5, 5, 1, 1)
    GrnGame.dessiner_mot("./assets/font", f"FPS: {int(GrnGame.fps)}", 5, 15, 1, 1)
    
    # Quitter
    if GrnGame.touche_juste_presser("escape"):
        GrnGame.stopper_jeu()

# Configuration et lancement
GrnGame.init(
    largeur=160,
    hauteur=90,
    fps=60,
    coeff=6,
    chemin_image="./assets",
    chemin_son="./assets",
    dessiner=True,
    bande_noir=True,
    r=15, g=15, b=35,
    update_func=update,
    nom_fenetre="Mon Jeu"
)


```

---

## üîß Cr√©er un ex√©cutable

### Compilation avec PyInstaller

```bash
GrnGame_app votre_fichier.py
```

**R√©sultat** :
- L'ex√©cutable est g√©n√©r√© dans `./dist/`
- Sur Windows : fichier `.exe`
- Sur Linux : binaire ex√©cutable

**Pr√©requis** :
- [PyInstaller](https://pyinstaller.org/) install√© : `pip install pyinstaller`

**Notes** :
- L'ex√©cutable est **sp√©cifique √† l'OS** de compilation
- Sur Linux post-compilation xmake, privil√©giez une distribution standard (Ubuntu, Debian) pour la portabilit√©

---

## ‚öôÔ∏è Compilation automatique

Si votre syst√®me n'est pas directement compatible, GrnGame compilera automatiquement la biblioth√®que native via [xmake](https://xmake.io).

**V√©rifications** :
- La biblioth√®que compil√©e doit se trouver dans `GrnGame/dist/`
- `xmake` doit √™tre install√© et accessible
- Un compilateur compatible (GCC, Clang, MSVC) doit √™tre pr√©sent

---

## üêõ R√©solution de probl√®mes

### La biblioth√®que ne se charge pas
- ‚úÖ V√©rifiez que la DLL/SO est dans `GrnGame/dist/`
- ‚úÖ Installez `xmake` pour la compilation automatique

### Les images ne s'affichent pas
- ‚úÖ V√©rifiez les chemins (relatifs au script principal)
- ‚úÖ Utilisez uniquement des fichiers PNG
- ‚úÖ Assurez-vous que `chemin_image` pointe vers le bon dossier

### Les sons ne fonctionnent pas
- ‚úÖ Utilisez uniquement des fichiers WAV
- ‚úÖ V√©rifiez les chemins des fichiers audio
- ‚úÖ Ne d√©passez pas 32 canaux simultan√©s

### Probl√®mes de performance
- ‚úÖ Utilisez `dessiner_image_batch()` pour les sprites multiples
- ‚úÖ R√©duisez le nombre d'appels √† `dessiner_image()` par frame
- ‚úÖ Optimisez la taille des sprites

### La manette ne fonctionne pas
- ‚úÖ Appelez `init_mannette()` **apr√®s** `GrnGame.init()`
- ‚úÖ Appelez `fermer_controller()` avant de quitter
- ‚úÖ V√©rifiez que la manette est bien connect√©e avant le lancement

---

## üìß Contact & Support

**Auteur** : Baptiste GUERIN  
**Email** : [baptiste.guerin34@gmail.com](mailto:baptiste.guerin34@gmail.com)

Pour signaler un bug ou proposer une am√©lioration, n'h√©sitez pas √† me contacter !

---

## üìÑ Licence

Ce projet est sous licence **MIT**.

---

<div align="center">

**GrnGame** - Un moteur de jeu 2D Python puissant, con√ßu pour le pixel art

[üåê GitHub](https://github.com/Baptistegrn/GrnGame) ‚Ä¢ [üì¶ PyPI](https://pypi.org/project/GrnGame/) ‚Ä¢ [‚úâÔ∏è Contact](mailto:baptiste.guerin34@gmail.com)

</div>
